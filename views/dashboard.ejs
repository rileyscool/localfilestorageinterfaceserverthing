<script>

    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(";").shift();
        return null;
    }
    // i hate cookies !


    async function refreshFiles() {
        const req = new XMLHttpRequest();
        req.open('POST', "accountFiles", true);
        const response = await new Promise((resolve, reject) => {
            req.onload = () => {
               resolve(req.response);
            };
            req.send();
        });



        data = JSON.parse(response);
        console.log(data);
        data.files.forEach(file => {
            console.log(file.name)
            element = document.createElement("li");
            linkthing = document.createElement("a");
            linkthing.innerHTML = file.name;
            linkthing.setAttribute("href", `/files/${getCookie("username")}/${file.name}`);
            element.appendChild(linkthing);
            // element.parent = element.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement;
            // what is this ai doing
             document.getElementById("files").appendChild(element);
        })

    }

</script>

<div>
    <h1>Files</h1>

    <ul id="files">

    </ul>
</div>